{% extends "base.html" %}

{% block title %}COSCUP Newsletter - 管理訂閱{% endblock %}

{% block content %}
<div class="card">
    <h2>管理訂閱</h2>
    {% if message %}
    <div class="alert alert-success">{{ message }}</div>
    {% endif %}
    <div class="info-block">
        <p><strong>Email：</strong> {{ email }}</p>
        <p><strong>狀態：</strong>
            {% if status %}
            <span class="status-active">已訂閱</span>
            {% else %}
            <span class="status-inactive">已取消</span>
            {% endif %}
        </p>
    </div>
    <h3 style="font-size:16px;margin-bottom:12px;">更新名稱</h3>
    <form method="POST" action="/manage/{{ admin_link }}/update" style="display:flex;gap:8px;margin-bottom:24px;">
        <input type="text" name="name" value="{{ name }}" required class="form-group" style="flex:1;padding:10px 14px;border:1px solid #d0d5dd;border-radius:8px;font-size:15px;font-family:inherit;">
        <button type="submit" class="btn btn-primary">更新</button>
    </form>
    {% if status %}
    <h3 style="font-size:16px;margin-bottom:12px;">取消訂閱</h3>
    <form method="POST" action="/manage/{{ admin_link }}/unsubscribe">
        {% if from_newsletter %}<input type="hidden" name="from" value="{{ from_newsletter }}">{% endif %}
        <button type="submit" class="btn btn-danger" style="width:100%;">取消訂閱</button>
    </form>
    {% else %}
    <h3 style="font-size:16px;margin-bottom:12px;">重新訂閱</h3>
    <form method="POST" action="/manage/{{ admin_link }}/resubscribe">
        <button type="submit" class="btn btn-primary" style="width:100%;">重新訂閱</button>
    </form>
    {% endif %}
</div>
{% endblock %}
